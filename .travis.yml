sudo: required
dist: xenial
language: python
python:
    - "2.7"

install:
  - sudo apt install -y software-properties-common
  - sudo add-apt-repository -y ppa:ethereum/ethereum
  - sudo apt update -qq
  - sudo apt install -y solc
  - sudo pip install manticore 

script:
  - |
    status=0
    for file in *.sol; do
      solc --combined-json abi,bin $file > /dev/null
      if [ $? -ne 0 ]; then status=1; fi
    done
    exit $status
  - cd tests/manticore/ && python operations-concrete-unit-tests.py
